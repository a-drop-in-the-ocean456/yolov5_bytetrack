# YOLOv5s + ByteTrack 汽车视频推理结果

## 任务概述

本次任务使用 **YOLOv5s** 目标检测模型结合 **ByteTrack** 多目标跟踪算法,对汽车交通视频进行了实时推理和跟踪。

## 技术栈

- **目标检测模型**: YOLOv5s (轻量级版本)
- **跟踪算法**: ByteTrack (高性能多目标跟踪)
- **检测类别**: 汽车 (car)、公交车 (bus)、卡车 (truck)
- **推理设备**: CPU
- **视频处理**: OpenCV

## 输入视频信息

- **文件名**: traffic_video.mp4
- **分辨率**: 1920x1080
- **帧率**: 30 fps
- **时长**: 60 秒
- **总帧数**: 1800 帧
- **文件大小**: 41 MB

## 输出视频信息

- **文件名**: output_tracked.mp4
- **分辨率**: 1920x1080
- **帧率**: 30 fps
- **时长**: 60 秒
- **文件大小**: 163 MB
- **编码格式**: MPEG-4 (Simple Profile)

## 推理配置

### YOLOv5s 参数
- **置信度阈值**: 0.25
- **NMS IoU 阈值**: 0.45
- **最大检测数量**: 1000

### ByteTrack 参数
- **跟踪阈值**: 0.5
- **跟踪缓冲**: 30 帧
- **匹配阈值**: 0.8

## 处理流程

1. **视频读取**: 使用 OpenCV 逐帧读取输入视频
2. **图像预处理**: 对每一帧进行 letterbox 缩放和归一化
3. **目标检测**: YOLOv5s 检测车辆目标并输出边界框
4. **多目标跟踪**: ByteTrack 对检测到的目标进行跟踪,分配唯一 ID
5. **结果可视化**: 在每一帧上绘制边界框和跟踪 ID
6. **视频输出**: 将处理后的帧写入输出视频文件

## 可视化效果

输出视频中的每个被跟踪的车辆都被标注了:
- **绿色边界框**: 标识检测到的车辆位置
- **跟踪 ID**: 每个车辆都有唯一的 ID 编号 (如 "ID:1", "ID:2" 等)

ByteTrack 算法能够在车辆被遮挡或暂时消失后,重新关联并保持相同的 ID,实现稳定的跟踪效果。

## 性能表现

- **处理速度**: 约 6 fps (CPU 模式)
- **总处理时间**: 约 5 分钟
- **跟踪稳定性**: 良好,能够处理遮挡和短暂消失的情况

## 文件清单

- `traffic_video.mp4` - 原始输入视频
- `output_tracked.mp4` - 跟踪结果输出视频
- `yolov5_bytetrack_inference.py` - 推理脚本
- `inference.log` - 推理日志
- `preview_frames/` - 提取的预览帧图片

## 使用说明

如需重新运行推理,可以使用以下命令:

```bash
cd /home/ubuntu
python3.11 yolov5_bytetrack_inference.py
```

## 技术亮点

1. **高效检测**: YOLOv5s 提供了速度和精度的良好平衡
2. **稳定跟踪**: ByteTrack 使用关联算法保持目标 ID 的一致性
3. **实时处理**: 即使在 CPU 上也能实现可接受的处理速度
4. **易于扩展**: 代码结构清晰,可以轻松调整参数或更换模型

## 改进建议

1. 使用 GPU 加速可以显著提升推理速度 (预计可达 30+ fps)
2. 可以调整置信度阈值以平衡检测精度和召回率
3. 可以添加更多车辆类别 (如摩托车、自行车等)
4. 可以输出跟踪统计数据 (如车辆计数、速度估计等)
